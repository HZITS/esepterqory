<html><head><link rel="import" href="../../bower_components/polymer/polymer-element.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/element-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/boot.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/settings.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/resolve-url.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/style-gather.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-module.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-effects.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/path.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/case-map.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-accessors.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/properties-changed.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/async.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/template-stamp.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/properties-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/html-tag.html"></head><body><dom-module id="editor-formula-module"><template><style>:host{display:inline-block;color:black;}#input:focus{outline:none;}#input{min-width:40px;font-family:Courier New, Courier, monospace;font-weight:500;background-color:white;position:relative;z-index:2;border:1px solid var(--paper-grey-300);}#formulaWrapper{min-width:40px;max-width:100%;min-height:30px;border:1px solid var(--paper-grey-300);position:absolute;background-color:whitesmoke;z-index:1;}</style><div id="body"><div id="wrapper"><div contenteditable="true" id="input" on-keyup="_editorBodyChanged"></div><div id="formulaWrapper"><math-tex id="math" display="block">[[bodyText]]</math-tex></div></div></div></template><script>class FormulaModule extends Polymer.Element{static get is(){return'editor-formula-module'}static get properties(){return{text:String,hasReplaced:Boolean,math:{type:String,observer:'mathChanged'}}}connectedCallback(){super.connectedCallback(),setTimeout(()=>{this.$.input.focus()}),this.$.input.onkeydown=(a)=>{if(13==a.which&&!1==a.shiftKey&&!this.hasReplaced)return this.setAttribute('math',this.bodyText),void(this.$.input.onkeydown=null)}}mathChanged(a){void 0===a||(this.$.wrapper.remove(),this.$.body.innerHTML=`
            	<math-tex id="math" display="block">${a}</math-tex>
			`)}_editorBodyChanged(){this.bodyText=this.$.input.innerText}}window.customElements.define(FormulaModule.is,FormulaModule);</script></dom-module></body></html>