<html><head><link rel="import" href="dashboard-add-topic-module.html"><link rel="import" href="dashboard-add-problem-module.html"><link rel="import" href="dashboard-problem-module.html"><link rel="import" href="dashboard-path-module.html"><link rel="import" href="dashboard-problems-cell-module.html"><link rel="prefetch" href="../../bower_components/polymer/polymer-element.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/element-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/boot.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/settings.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/resolve-url.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/style-gather.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-module.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-effects.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/path.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/case-map.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/property-accessors.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/properties-changed.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/async.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/template-stamp.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/properties-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/html-tag.html"><link rel="prefetch" href="../editor/editor-module.html"><link rel="prefetch" href="../../bower_components/iron-icons/editor-icons.html"><link rel="prefetch" href="../../bower_components/iron-icon/iron-icon.html"><link rel="prefetch" href="../../bower_components/polymer/polymer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/legacy-element-mixin.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.html"><link rel="prefetch" href="../../bower_components/shadycss/apply-shim.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/gesture-event-listeners.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/gestures.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/debounce.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/dir-mixin.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/import-href.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/render-status.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/unresolved.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer.dom.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flattened-nodes-observer.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/array-splice.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/flush.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/polymer-fn.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/class.html"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/templatizer-behavior.html"><link rel="prefetch" href="../../bower_components/polymer/lib/utils/templatize.html"><link rel="prefetch" href="../../bower_components/polymer/lib/mixins/mutable-data.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-bind.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-repeat.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/dom-if.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/array-selector.html"><link rel="prefetch" href="../../bower_components/polymer/lib/elements/custom-style.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.html"><link rel="prefetch" href="../../bower_components/shadycss/custom-style-interface.min.js"><link rel="prefetch" href="../../bower_components/polymer/lib/legacy/mutable-data-behavior.html"><link rel="prefetch" href="../../bower_components/iron-meta/iron-meta.html"><link rel="prefetch" href="../../bower_components/iron-flex-layout/iron-flex-layout.html"><link rel="prefetch" href="../../bower_components/iron-iconset-svg/iron-iconset-svg.html"><link rel="prefetch" href="../editor/editor-formula-module.html"></head><body><dom-module id="dashboard-module"><template><style include="shared-styles">:host{display:block;background-color:white;display:flex;flex-flow:column;}list-module{flex:0 1 auto;height:calc(100vh - 122px);border-right:1px solid var(--paper-grey-300);}dashboard-problem-module{flex:1 1 auto;}.head{height:40px;padding-left:16px;border-bottom:2px solid var(--paper-grey-300);background-color:var(--paper-grey-100);color:var(--paper-grey-600);}.body{background-color:white;display:flex;flex-flow:column;}.topic:hover, .listItem:hover{color:black;cursor:pointer;}.listItem:hover{background-color:var(--paper-grey-300);}.listItem{height:32px;line-height:32px;color:var(--paper-grey-700);padding-left:16px;}.list{overflow:auto;height:calc(100vh - 123px);}</style><app-location route="{{route}}"></app-location><app-route route="{{route}}" pattern="/dashboard/:page" data="{{routeData}}" tail="{{subroute}}"></app-route><app-route route="{{subroute}}" pattern="/dashboard/[[page]]/:problemId" data="{{subrouteData}}"></app-route><dashboard-path-module class="head" topics="[[topic.topicsPath]]"></dashboard-path-module><div class="body layout horizontal"><list-module show-title="" title="[[topic.title]]" button-title="Добавить подтему" event="add-topic" style="width:300px"><iron-list slot="list" items="[[topic.subtopics]]"><template><a class="listItem" href$="dashboard/[[item._id]]">[[item.title]]([[item.problemsCount]])</a></template></iron-list></list-module><list-module show-title="" style="width:500px" title="[[problem.title]]" button-title="[[problem.buttonTitle]]" event="add-problem"><iron-list slot="list" id="problems" items="[[problems]]" selection-enabled="" selected-item="{{selectedProblem}}"><template><dashboard-problems-cell-module selected="[[selected]]" problem="[[item]]"></dashboard-problems-cell-module></template></iron-list></list-module><dashboard-problem-module data="[[selectedProblem]]"></dashboard-problem-module></div><nebula-dialog id="problemDialog"><dashboard-add-problem-module topic="[[topic]]"></dashboard-add-problem-module></nebula-dialog><nebula-dialog id="topicDialog"><dashboard-add-topic-module topic="[[topic]]"></dashboard-add-topic-module></nebula-dialog></template><script>class DashboardModule extends Polymer.Element{static get is(){return'dashboard-module'}static get properties(){return{section:Object,topic:{type:Object,observer:'topicChanged'},currentListener:Object,page:{type:String,observer:'pageChanged'},currentPage:String,routeData:Object,subroute:String,problem:{type:Object,value:{}}}}static get observers(){return['routePageChanged(routeData.page)','subroutePageChanged(subrouteData.page)']}connectedCallback(){super.connectedCallback(),dispatcher.subscribe('math-rendered',()=>{this.$.problems.notifyResize()}),this.addEventListener('add-topic',()=>{this.$.topicDialog.show()}),this.addEventListener('add-problem',()=>{this.$.problemDialog.show()})}routePageChanged(a){this.page=a}pageChanged(a){ajax().get('/api/topics/'+a,{populate:!0}).then((a)=>{var b=a;b.subtopics instanceof Array||(b.subtopics=[b.subtopics]),this.topic=b})}topicChanged(a){a&&(this.problem=1<a.path.split('/').length?{title:'\u0417\u0430\u0434\u0430\u0447\u0438 \u0432 \u0442\u0435\u043C\u0435: '+a.title,buttonTitle:'\u0414\u043E\u0431\u0430\u0432\u0438\u0442\u044C \u0437\u0430\u0434\u0430\u0447\u0443'}:null,ajax().get('/api/problems/topic/'+a._id).then((a)=>{this.problems=a}))}}customElements.define(DashboardModule.is,DashboardModule);</script></dom-module></body></html>